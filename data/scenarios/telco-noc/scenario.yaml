# ============================================================================
# Scenario Manifest — Telco NOC (Fibre Cut)
# ============================================================================

name: telco-noc
display_name: "Australian Telco NOC — Fibre Cut Incident"
description: >
  A fibre cut on the Sydney-Melbourne corridor triggers a cascading alert
  storm affecting enterprise VPNs, broadband, and mobile services. The AI
  investigates root cause, blast radius, and remediation.
version: "1.0"
domain: telecommunications

# ---------------------------------------------------------------------------
# Use cases & example questions (surfaced in Scenario Info tab)
# ---------------------------------------------------------------------------

use_cases:
  - "Fibre cut incident investigation and root cause correlation"
  - "MPLS path failover analysis and traffic rerouting assessment"
  - "Enterprise service impact mapping across BGP sessions"
  - "Alert storm triage and deduplication across transport links"
  - "SLA breach risk assessment for affected customers"

example_questions:
  - "What caused the alert storm on the Sydney-Melbourne corridor?"
  - "Which enterprise services are affected by the fibre cut?"
  - "How are MPLS paths rerouting around the failed transport link?"
  - "What BGP sessions are down and what's their blast radius?"
  - "Which SLA policies are at risk of being breached?"
  - "Show me the correlation between optical power drops and service degradation"

# ---------------------------------------------------------------------------
# Data layout — paths relative to this file's parent directory
# ---------------------------------------------------------------------------

paths:
  entities: data/entities              # CSV files for graph vertices + edges
  graph_schema: graph_schema.yaml      # Gremlin ingestion manifest (at scenario root)
  telemetry: data/telemetry            # AlertStream.csv, LinkTelemetry.csv
  runbooks: data/knowledge/runbooks    # .md files → AI Search
  tickets: data/knowledge/tickets      # .txt files → AI Search
  prompts: data/prompts                # Agent prompt fragments
  default_alert: data/prompts/alert_storm.md  # Default demo input

# ---------------------------------------------------------------------------
# Cosmos DB mapping (names are scenario-prefixed at deploy time)
# ---------------------------------------------------------------------------

cosmos:
  gremlin:
    database: networkgraph            # shared database
    graph: topology                   # deploy script prefixes: telco-noc-topology
  nosql:
    database: telemetry               # deploy script prefixes: telco-noc-telemetry
    containers:
      - name: AlertStream
        partition_key: /SourceNodeType
        csv_file: AlertStream.csv
        id_field: AlertId
        numeric_fields: [OpticalPowerDbm, BitErrorRate, CPUUtilPct, PacketLossPct]
      - name: LinkTelemetry
        partition_key: /LinkId
        csv_file: LinkTelemetry.csv
        id_field: null  # composite: LinkId + Timestamp
        numeric_fields: [UtilizationPct, OpticalPowerDbm, BitErrorRate, LatencyMs]

# ---------------------------------------------------------------------------
# AI Search indexes
# ---------------------------------------------------------------------------

search_indexes:
  - name: runbooks-index
    container: runbooks               # blob storage container name
    source: data/knowledge/runbooks
  - name: tickets-index
    container: tickets
    source: data/knowledge/tickets

# ---------------------------------------------------------------------------
# Graph visualisation hints (frontend node styling)
# ---------------------------------------------------------------------------

graph_styles:
  node_types:
    CoreRouter:    { color: "#60a5fa", size: 28, icon: "router" }
    AggSwitch:     { color: "#34d399", size: 22, icon: "switch" }
    BaseStation:   { color: "#a78bfa", size: 18, icon: "antenna" }
    TransportLink: { color: "#f97316", size: 16, icon: "link" }
    MPLSPath:      { color: "#fbbf24", size: 14, icon: "path" }
    Service:       { color: "#f472b6", size: 20, icon: "service" }
    SLAPolicy:     { color: "#94a3b8", size: 12, icon: "policy" }
    BGPSession:    { color: "#22d3ee", size: 14, icon: "session" }

# ---------------------------------------------------------------------------
# Telemetry baselines (used to generate prompt sections)
# ---------------------------------------------------------------------------

telemetry_baselines:
  link_telemetry:
    - metric: LatencyMs
      normal: "2–15 ms"
      degraded: "> 50 ms"
      down: "9999 ms"
    - metric: OpticalPowerDbm
      normal: "-8 to -12 dBm"
      degraded: "< -20 dBm"
      down: "< -30 dBm"
    - metric: BitErrorRate
      normal: "< 1e-9"
      degraded: "> 1e-6"
      down: "≈ 1"
    - metric: UtilizationPct
      normal: "20–70%"
      degraded: "> 80%"
      down: "0% (with other down indicators)"
  alert_stream:
    - metric: PacketLossPct
      normal: "< 1%"
      anomalous: "> 2%"
    - metric: CPUUtilPct
      normal: "< 70%"
      anomalous: "> 85%"
    - metric: OpticalPowerDbm
      normal: "-8 to -12 dBm"
      anomalous: "< -20 dBm"
    - metric: BitErrorRate
      normal: "< 1e-9"
      anomalous: "> 1e-6"
